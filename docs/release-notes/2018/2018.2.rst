GROMACS 2018.2 release notes
----------------------------

This version was released on TODO, 2018. These release notes document
the changes that have taken place in GROMACS since version 2018.1, to fix known
issues. It also incorporates all fixes made in version TODO and
earlier, which you can find described in the :ref:`release-notes`.

Fixes where mdrun could behave incorrectly
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Prevent OpenCL timing memory leak
"""""""""""""""""""""""""""""""""

When using OpenCL builds and timing, a memory leak would lead to all system memory being used up.

:issue:`2470`

Fix MPI error after constraint failure during energy minimization
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

:issue:`2540`

Fix moving frozen atoms with constraints
""""""""""""""""""""""""""""""""""""""""

Frozen atoms which also had bond constraints could move.

:issue:`2542`

Fix COM removal moving frozen atoms
"""""""""""""""""""""""""""""""""""

When frozen atoms were part of center of mass motion removal groups,
they could accumulate momentum and move.

:issue:`2551`

Fixes for ``gmx`` tools
^^^^^^^^^^^^^^^^^^^^^^^

Fixed buffer overflow in grompp warnings
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
When grompp issued a warning or error with a filename/path of more than
255 characters, a buffer overflow would occur. This could also happens
during make check/test.

:issue:`2465`

Fix infinite loop in gmx solvate
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
When provided with a PDB file that had no box information for the solvent,
gmx solvate could be stuck in an infinite loop.
Fixed by disallowing empty boxes for solvent PDB files.

:issue:`2523`

Fixed enemat when the .edr file had no matching energy groups
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

:issue:`2508`

Fix PQR file output
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
PQR files from gmx editconf violated the standard for the format because
they were always written in fixed format. This commit fixes the issue by
introducing a different output method for PQR files that follows the
standard.

:issue:`2511`

Fix crash in gmx solvate
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
gmx solvate would crash due to memory corruption when using multiple solvent
molecule types.

Added check for unallowed periodic setups
"""""""""""""""""""""""""""""""""""""""""

Long distances between atoms in bonded interactions could lead to incorrect
periodicity removal. In such cases an inconsistent shift message was printed,
but the run or analysis was not terminated and other, confusing, errors
could be issued. Now an informative fatal error is issued.

:issue:`2549`

Fixed AWH too infrequent checks for covering
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
For multidimensional AWH grids with many points relative to the number
of samples required for covering the grid, the detection of covering
could be delayed because of too infrequent checks.

:issue:`2487`

Fixes to improve portability
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Fixed CUDA compilation on Windows.
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

:issue:`2509`

Miscellaneous
^^^^^^^^^^^^^

Fixed inadvertent disabling of SIMD version of the integrator
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

Fixed a bug so the SIMD version of the leap-frog integrator is chosen, when possible.

:issue:`2497`

Fix own FFTW builds on certain AVX2/AVX512 hardware
"""""""""""""""""""""""""""""""""""""""""""""""""""""

Version 3.3.8 of FFTW fixes some known gcc-8 errors for AVX2 by removing the 
fast-math flag, and it also appears to fix an issue with failed unit tests on
AVX512-capable hardware, so we have bumped the version we download to 3.3.8.

:issue:`2541`
