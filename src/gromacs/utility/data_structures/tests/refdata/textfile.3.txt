Techniques for locating concurrency-related bugs
309
The confidence you have in the results does depend on the amount of code being
tested by each test. If your tests are quite fine-grained, like the tests outlined previ-
ously for a thread-safe queue, such brute-force testing can give you a high degree of
confidence in your code. On the other hand, if the code being tested is considerably
larger, the number of possible scheduling permutations is so vast that even a billion
test runs might yield a low level of confidence.
The downside to brute-force testing is that it might give you false confidence. If the way
you've written the test means that the problematic circumstances can't occur, you can
run the test as many times as you like and it won't fail, even if it would fail every time in
slightly different circumstances. The worst example is where the problematic circum-
stances can't occur on your test system because of the way the particular system you're
testing on happens to run. Unless your code is to run only on systems identical to the
one being tested, the particular hardware and operating system combination may not
allow the circumstances that would cause a problem to arise.
The classic example here is testing a multithreaded application on a single-
processor system. Because every thread has to run on the same processor, everything is
automatically serialized, and many race conditions and cache ping-pong problems that
you may get with a true multiprocessor system evaporate. This isn't the only variable
though; different processor architectures provide different synchronization and order-
ing facilities. For example, on x86 and x86-64 architectures, atomic load operations are
always the same, whether tagged memory_order_relaxed or memory_order_seq_cst
(see section 5.3.3). This means that code written using relaxed memory ordering may
work on systems with an x86 architecture, where it would fail on a system with a finer-
grained set of memory-ordering instructions such as SPARC.
If you need your application to be portable across a range of target systems, it's
important to test it on representative instances of those systems. This is why I listed the
processor architectures being used for testing as a consideration in section 10.2.2.
Avoiding the potential for false confidence is crucial to successful brute-force test-
ing. This requires careful thought over test design, not just with respect to the choice
of unit for the code being tested but also with respect to the design of the test harness
and the choice of testing environment. You need to ensure that as many of the code
paths as possible are tested and as many of the possible thread interactions as feasible.
Not only that, but you need to know which options are covered and which are left untested.
Although brute-force testing does give you some degree of confidence in your
code, it's not guaranteed to find all the problems. There's one technique that is guar-
anteed to find the problems, if you have the time to apply it to your code and the
appropriate software. I call it combination simulation testing.
        NTmet            NTP
        NTmet           NTD1
        NTmet           NTD2
        NTmet           NTD3
          SER          SERP1
          SER          SERP2
          SER          SERP3
          ASP          ASP1S
          ASP          ASP1A
          ASP          ASP2S
          ASP          ASP2A
          ASP           ASPD
         SER          SERP1
         SER          SERP2
         SER          SERP3
         THR          THRP1
         THR          THRP2
         THR          THRP3
         TYR          TYRP1
         TYR          TYRP2
         TYR          TYRP3
         TYR           TYRD
         ARG           ARGP
         ARG          ARGDE
         ARG         ARGD11
         ARG         ARGD12
         ARG         ARGD21
         ARG         ARGD22
         ARG           ARGP
         ARG          ARGDE
         ARG         ARGD11
         ARG         ARGD12
         ARG         ARGD21
         ARG         ARGD22
         LYS           LYSP
         LYS          LYSD1
         LYS          LYSD2
         LYS          LYSD3
         SER          SERP1
         SER          SERP2
         SER          SERP3
         SER          SERP1
         SER          SERP2
         SER          SERP3
         THR          THRP1
         THR          THRP2
         THR          THRP3
         TYR          TYRP1
         TYR          TYRP2
         TYR          TYRP3
         TYR           TYRD
         TYR          TYRP1
         TYR          TYRP2
         TYR          TYRP3
         TYR           TYRD
         SER          SERP1
         SER          SERP2
         SER          SERP3
         SER          SERP1
         SER          SERP2
         SER          SERP3
         ASP          ASP1S
         ASP          ASP1A
         ASP          ASP2S
         ASP          ASP2A
         ASP           ASPD
         SER          SERP1
         SER          SERP2
         SER          SERP3
         TYR          TYRP1
         TYR          TYRP2
         TYR          TYRP3
         TYR           TYRD
         SER          SERP1
         SER          SERP2
         SER          SERP3
         LYS           LYSP
         LYS          LYSD1
         LYS          LYSD2
         LYS          LYSD3
         GLU          GLU1S
         GLU          GLU1A
         GLU          GLU2S
         GLU          GLU2A
         GLU           GLUD
         ASP          ASP1S
         ASP          ASP1A
         ASP          ASP2S
         ASP          ASP2A
         ASP           ASPD
         TYR          TYRP1
         TYR          TYRP2
         TYR          TYRP3
         TYR           TYRD
        THR          THRP1
        THR          THRP2
        THR          THRP3
        THR          THRP1
        THR          THRP2
        THR          THRP3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        GLU          GLU1S
        GLU          GLU1A
        GLU          GLU2S
        GLU          GLU2A
        GLU           GLUD
        ARG           ARGP
        ARG          ARGDE
        ARG         ARGD11
        ARG         ARGD12
        ARG         ARGD21
        ARG         ARGD22
        LYS           LYSP
        LYS          LYSD1
        LYS          LYSD2
        LYS          LYSD3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        THR          THRP1
        THR          THRP2
        THR          THRP3
        TYR          TYRP1
        TYR          TYRP2
        TYR          TYRP3
        TYR           TYRD
        HIS            HSP
        HIS            HSD
        HIS            HSE
        HIS            HSU
        LYS           LYSP
        LYS          LYSD1
        LYS          LYSD2
        LYS          LYSD3
        ASP          ASP1S
        ASP          ASP1A
        ASP          ASP2S
        ASP          ASP2A
        ASP           ASPD
        HIS            HSP
        HIS            HSD
        HIS            HSE
        HIS            HSU
        SER          SERP1
        SER          SERP2
        SER          SERP3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        THR          THRP1
        THR          THRP2
        THR          THRP3
        LYS           LYSP
        LYS          LYSD1
        LYS          LYSD2
        LYS          LYSD3
        ARG           ARGP
        ARG          ARGDE
        ARG         ARGD11
        ARG         ARGD12
        ARG         ARGD21
        ARG         ARGD22
        GLU          GLU1S
        GLU          GLU1A
        GLU          GLU2S
        GLU          GLU2A
        GLU           GLUD
        GLU          GLU1S
        GLU          GLU1A
        GLU          GLU2S
        GLU          GLU2A
        GLU           GLUD
        TYR          TYRP1
        TYR          TYRP2
        TYR          TYRP3
        TYR           TYRD
        SER          SERP1
        SER          SERP2
        SER          SERP3
        GLU          GLU1S
        GLU          GLU1A
        GLU          GLU2S
        GLU          GLU2A
        GLU           GLUD
        HIS            HSP
        HIS            HSD
        HIS            HSE
        HIS            HSU
        SER          SERP1
        SER          SERP2
        SER          SERP3
        THR          THRP1
        THR          THRP2
        THR          THRP3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        ASP          ASP1S
        ASP          ASP1A
        ASP          ASP2S
        ASP          ASP2A
        ASP           ASPD
        THR          THRP1
        THR          THRP2
        THR          THRP3
        THR          THRP1
        THR          THRP2
        THR          THRP3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        LYS           LYSP
        LYS          LYSD1
        LYS          LYSD2
        LYS          LYSD3
        LYS           LYSP
        LYS          LYSD1
        LYS          LYSD2
        LYS          LYSD3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        THR          THRP1
        THR          THRP2
        THR          THRP3
        ASP          ASP1S
        ASP          ASP1A
        ASP          ASP2S
        ASP          ASP2A
        ASP           ASPD
        LYS           LYSP
        LYS          LYSD1
        LYS          LYSD2
        LYS          LYSD3
        CYS          CYSP1
        CYS          CYSP2
        CYS          CYSP3
        CYS           CYSD
        TYR          TYRP1
        TYR          TYRP2
        TYR          TYRP3
        TYR           TYRD
        ASP          ASP1S
        ASP          ASP1A
        ASP          ASP2S
        ASP          ASP2A
        ASP           ASPD
        ARG           ARGP
        ARG          ARGDE
        ARG         ARGD11
        ARG         ARGD12
        ARG         ARGD21
        ARG         ARGD22
        LYS           LYSP
        LYS          LYSD1
        LYS          LYSD2
        LYS          LYSD3
        LYS           LYSP
        LYS          LYSD1
        LYS          LYSD2
        LYS          LYSD3
        LYS           LYSP
        LYS          LYSD1
        LYS          LYSD2
        LYS          LYSD3
        ASP          ASP1S
        ASP          ASP1A
        ASP          ASP2S
        ASP          ASP2A
        ASP           ASPD
        GLU          GLU1S
        GLU          GLU1A
        GLU          GLU2S
        GLU          GLU2A
        GLU           GLUD
        SER          SERP1
        SER          SERP2
        SER          SERP3
        ASP          ASP1S
        ASP          ASP1A
        ASP          ASP2S
        ASP          ASP2A
        ASP           ASPD
        HIS            HSP
        HIS            HSD
        HIS            HSE
        HIS            HSU
        SER          SERP1
        SER          SERP2
        SER          SERP3
        GLU          GLU1S
        GLU          GLU1A
        GLU          GLU2S
        GLU          GLU2A
        GLU           GLUD
        TYR          TYRP1
        TYR          TYRP2
        TYR          TYRP3
        TYR           TYRD
        SER          SERP1
        SER          SERP2
        SER          SERP3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        THR          THRP1
        THR          THRP2
        THR          THRP3
        THR          THRP1
        THR          THRP2
        THR          THRP3
        TYR          TYRP1
        TYR          TYRP2
        TYR          TYRP3
        TYR           TYRD
        THR          THRP1
        THR          THRP2
        THR          THRP3
        LYS           LYSP
        LYS          LYSD1
        LYS          LYSD2
        LYS          LYSD3
        ASP          ASP1S
        ASP          ASP1A
        ASP          ASP2S
        ASP          ASP2A
        ASP           ASPD
        ARG           ARGP
        ARG          ARGDE
        ARG         ARGD11
        ARG         ARGD12
        ARG         ARGD21
        ARG         ARGD22
        SER          SERP1
        SER          SERP2
        SER          SERP3
        SER          SERP1
        SER          SERP2
        SER          SERP3
        GLU          GLU1S
        GLU          GLU1A
        GLU          GLU2S
        GLU          GLU2A
        GLU           GLUD
        GLU          GLU1S
        GLU          GLU1A
        GLU          GLU2S
        GLU          GLU2A
        GLU           GLUD
        TYR          TYRP1
        TYR          TYRP2
        TYR          TYRP3
        TYR           TYRD
        ASP          ASP1S
        ASP          ASP1A
        ASP          ASP2S
        ASP          ASP2A
        ASP           ASPD
        SER          SERP1
        SER          SERP2
        SER          SERP3
        HIS            HSP
        HIS            HSD
        HIS            HSE
        HIS            HSU
        GLU          GLU1S
        GLU          GLU1A
        GLU          GLU2S
        GLU          GLU2A
        GLU           GLUD
        GLU          GLU1S
        GLU          GLU1A
        GLU          GLU2S
        GLU          GLU2A
        GLU           GLUD
        TYR          TYRP1
        TYR          TYRP2
        TYR          TYRP3
        TYR           TYRD
      CTthr           CT1S
      CTthr           CT1A
      CTthr           CT2S
      CTthr           CT2A
      CTthr            CTD
        THR          THRP1
        THR          THRP2
        THR          THRP3
        NH3        PDN1110
        NH3        PDN1101
        NH3        PDN1011
        NH3        PDN0111
        NH3        PDN1111
        NH3        PDW1000
        NH3        PDW0100
        NH3        PDW0010
        NH3        PDW0001
        NH3        PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDEMPTY
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3        PDN1110
        NH3        PDN1101
        NH3        PDN1011
        NH3        PDN0111
        NH3        PDN1111
        NH3        PDW1000
        NH3        PDW0100
        NH3        PDW0010
        NH3        PDW0001
        NH3        PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDEMPTY
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3        PDN1110
        NH3        PDN1101
        NH3        PDN1011
        NH3        PDN0111
        NH3        PDN1111
        NH3        PDW1000
        NH3        PDW0100
        NH3        PDW0010
        NH3        PDW0001
        NH3        PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDEMPTY
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3        PDN1110
        NH3        PDN1101
        NH3        PDN1011
        NH3        PDN0111
        NH3        PDN1111
        NH3        PDW1000
        NH3        PDW0100
        NH3        PDW0010
        NH3        PDW0001
        NH3        PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDEMPTY
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3        PDN1110
        NH3        PDN1101
        NH3        PDN1011
        NH3        PDN0111
        NH3        PDN1111
        NH3        PDW1000
        NH3        PDW0100
        NH3        PDW0010
        NH3        PDW0001
        NH3        PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDEMPTY
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3        PDN1110
        NH3        PDN1101
        NH3        PDN1011
        NH3        PDN0111
        NH3        PDN1111
        NH3        PDW1000
        NH3        PDW0100
        NH3        PDW0010
        NH3        PDW0001
        NH3        PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDEMPTY
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3        PDN1110
        NH3        PDN1101
        NH3        PDN1011
        NH3        PDN0111
        NH3        PDN1111
        NH3        PDW1000
        NH3        PDW0100
        NH3        PDW0010
        NH3        PDW0001
        NH3        PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDEMPTY
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3       PDN1111
        NH3       PDW1000
        NH3       PDW0100
        NH3       PDW0010
        NH3       PDW0001
        NH3       PDW1100
        NH3       PDW0110
        NH3       PDW0011
        NH3       PDW1001
        NH3       PDW1010
        NH3       PDW0101
        NH3       PDW0111
        NH3       PDW1011
        NH3       PDW1101
        NH3       PDW1110
        NH3       PDN1110
        NH3       PDN1101
        NH3       PDN1011
        NH3       PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
        NH3      PDN1110
        NH3      PDN1101
        NH3      PDN1011
        NH3      PDN0111
        NH3      PDN1111
        NH3      PDW1000
        NH3      PDW0100
        NH3      PDW0010
        NH3      PDW0001
        NH3      PDW1100
        NH3      PDW0110
        NH3      PDW0011
        NH3      PDW1001
        NH3      PDW1010
        NH3      PDW0101
        NH3      PDW0111
        NH3      PDW1011
        NH3      PDW1101
        NH3      PDW1110
